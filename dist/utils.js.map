{"version":3,"sources":["../src/utils.js"],"names":["fileName","globModulePathsAsync","then","result","console","log","mergeGlobPathsAsync","dist","process","cwd","fs","promisifyAll","require","capitalize","firstCharUpperCase","str","charAt","toUpperCase","substr","length","classMethods","currentName","modulePrototype","Obj","objInstance","reduce","prev","curr","name","cleanObj","Object","keys","obj","forEach","key","undefined","createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","prototype","merge","objects","previous","current","readFile","filePath","readFileAsync","stdout","write","readModuleFile","moduleFilePath","globGQLModulePathsAsync","fileNamePrefix","catch","error","globPathsAsync","logAsync","value","pipeAsync","initialValue","sequence","getAllMethods","l","getOwnPropertyNames","concat","getOwnPropertySymbols","map","s","toString","sort","filter","p","arr","indexOf","getPrototypeOf","getMethods"],"mappings":"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","file":"utils.js","sourcesContent":["import Bluebird from 'bluebird';\nimport glob from 'glob-promise';\nimport deepMerge from 'deepmerge';\n\nconst dist = `${process.cwd()}/server`;\nconst fs = Bluebird.promisifyAll(require('fs'));\n\n\nexport const capitalize = str => {\n  const firstCharUpperCase = str.charAt(0).toUpperCase();\n  return `${firstCharUpperCase}${str.substr(1, str.length - 1)}`;\n};\n\nexport const classMethods = ({ currentName, modulePrototype, Obj }) => {\n  const objInstance = new Obj();\n\n  return modulePrototype.reduce((prev, curr) => {\n    if (curr === 'undefined' ||\n      (objInstance[curr].name === currentName && \n      objInstance[curr].name == null)\n    ) {\n      return prev;\n\n    } else {\n      return {\n        ...prev,\n        [objInstance[curr].name]: objInstance[curr]\n      };\n    }\n  }, {});\n};\n\n\nexport const cleanObj = obj => {\n  Object.keys(obj).forEach(key =>\n    ((obj[key] && typeof obj[key] === 'object') && cleanObj(obj[key])) ||\n    ((obj[key] === undefined || obj[key] === null) && delete obj[key])\n  );\n  return obj;\n};\n\n\nexport const createClass = function () { \n  function defineProperties (target, props) { \n    for (var i = 0; i < props.length; i++) { \n      var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; \n      if ('value' in descriptor) descriptor.writable = true; \n      Object.defineProperty(target, descriptor.key, descriptor); \n    } \n  }\n\n  return function (Constructor, protoProps, staticProps) { \n    if (protoProps) defineProperties(Constructor.prototype, protoProps); \n    if (staticProps) defineProperties(Constructor, staticProps); \n    return Constructor; \n  }; \n};\n\n\nexport const merge = objects => objects.reduce((previous, current) => {\n  return deepMerge(previous, current);\n}, {});\n\n\nexport async function mergeGlobPathsAsync (fileName) {\n  return async function () {\n    try {\n      return globModulePathsAsync(fileName)\n        .then(result => [ ...arguments[0], ...result ]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n}\n\nexport const readFile = async filePath => {\n  try {\n    return await fs.readFileAsync(filePath, 'utf8');\n  } catch (error) {\n    process.stdout.write(error);\n  }\n};\n\n\nexport const readModuleFile = async moduleFilePath => {\n  try {\n    const filePath = await glob(`${dist}/modules/${moduleFilePath}`);\n    return await fs.readFileAsync(filePath[0], 'utf8');\n\n  } catch (error) {\n    process.stdout.write(error);\n  }\n};\n\n\nexport const globGQLModulePathsAsync = fileNamePrefix => {\n  return glob(`${dist}/modules/**/${fileNamePrefix}*.gql`)\n    .catch((error) => process.stdout.write(error));\n};\n\n\nexport const globModulePathsAsync = fileNamePrefix => {\n  return glob(`${dist}/modules/**/${fileNamePrefix}*.js`)\n    .catch((error) => process.stdout.write(error));\n};\n\nexport const globPathsAsync = fileName => {\n  return glob(`${dist}/**/${fileName}`)\n    .catch((error) => process.stdout.write(error));\n};\n\n\nexport const logAsync = async value => {\n  try {\n    return await value;\n  } catch (error) {\n    process.stdout.write(error);\n  }\n};\n\n\nexport const pipeAsync = sequence => async initialValue => {\n  try {\n    return await Bluebird.reduce(sequence, async (previous, current) => {\n      try {\n        return await current(previous);\n      } catch (error) {\n        process.stdout.write(error);\n      }\n    }, initialValue)\n    .catch(error => process.stdout.write(error));\n  } catch (error) {\n    process.stdout.write(error);\n  }\n};\n\n\nexport const getAllMethods = (obj) => {\n  let props = [];\n\n  do {\n    const l = Object.getOwnPropertyNames(obj)\n        .concat(Object.getOwnPropertySymbols(obj).map(s => s.toString()))\n        .sort()\n        .filter((p, i, arr) =>\n            typeof obj[p] === 'function' &&\n            (i == 0 || p !== arr[i - 1]) &&\n            props.indexOf(p) === -1\n        );\n    props = props.concat(l);\n  }\n  while (\n      (obj = Object.getPrototypeOf(obj)) &&\n      Object.getPrototypeOf(obj)\n  );\n\n  return props;\n};\n\nexport const getMethods = (obj) => {\n  let props = [];\n\n  do {\n    const l = Object.getOwnPropertyNames(obj)\n        .concat(Object.getOwnPropertySymbols(obj).map(s => s.toString()))\n        .sort()\n        .filter((p, i, arr) =>\n            typeof obj[p] === 'function' &&\n            p !== 'constructor' && \n            (i == 0 || p !== arr[i - 1]) &&\n            props.indexOf(p) === -1\n        );\n    props = props.concat(l);\n  }\n  while (\n      (obj = Object.getPrototypeOf(obj)) &&\n      Object.getPrototypeOf(obj)\n  );\n\n  return props;\n};\n"]}